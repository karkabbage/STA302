---
title: "explorations2"
author: "Realest Estate enthusiasts"
date: "2024-06-06"
output: html_document
---


# Part1: Data exploration 

regres residuals to prediect weights, weights to correct shift in residuals, reduce effect of random error, similar dispersion, 

reduced preidction interval menas smaller variance if after transformation, wls corrects variance, 
solving covriance problem

pval: keep all params to zero, evidence that putting all to zero could provide a better fit, 

boxcox to see which power to use, check closest

We read our example data

```{r}
#install these and uncomment if u didn't download them yet:
#install.packages("ggfortify")
#install.packages("dplyr")
#install.packages("ggplot2")

#library(dplyr)
#library(ggfortify)

n = 100 # number of samples

data_raw = read.csv("estate_modified.csv")
sampled_df <- data_raw[sample(nrow(data_raw), n), ]

# below is how to change categorical / word data into numerical 
#sampled_df$smoker <- ifelse(sampled_df$smoker == "yes", 1, 0)
#sampled_df$sex <- ifelse(sampled_df$sex == "female", 1, 0)
#sampled_df$region <- as.numeric(factor(sampled_df$region)) - 1

df_selected <- sampled_df %>%
 select(transactionDate, houseAge, distanceMRTStation, noConvenienceStores, latitude, longitude, housePriceUnitArea) 
# name that they are in the data set, seperate them by commas

#plot(x=sampled_df$children, y=sampled_df$charges)

# this plots each pair of variables against eachother to make sure they have a linear relation
pairs( df_selected, panel=function(x,y){
  points(x,y)
  abline(lm(y~x), col='red')
  text(0,1.5,labels = paste('R2=',round((cor(x,y))^2,2)) ,col='red' )
})

# INSERT_RESPONSE_VAR, PREDICTOR_ONE, PREDICTOR_TWO are all names of the data columns/variables
model <- lm(housePriceUnitArea ~ transactionDate + houseAge + distanceMRTStation + latitude + longitude, data = df_selected)

# below tests the residuals if they follow our assumptions:
plot(model)
```
Looking at plot() results, not sure if we need transformation??

```{r}
summary(model)
```
Concerned about intercept not being significant.

Next plot residuals 
Taken from codealong6complete.rmd file.

```{r}
X <- model.matrix(model)
head(X)
colnames(X)

# we will want a plot for all columns except the intercept, so columns 2-8
# the residuals we need will come from the full model now
rfull <- model$residuals

# create our plot grid and our first plot
par(mfrow=c(3,3))
plot(rfull ~ model$fitted.values, xlab="Fitted Values", ylab="Residuals")

# fill in the loop information to go around this
for(i in 1:6){
plot(rfull ~ X[,i], xlab=colnames(X)[i], ylab="Residuals")
}

# then add the normal QQ plot
qqnorm(rfull)
qqline(rfull)
```
Some clumping but residuals seem to be gathered around 0 which is good (?)


